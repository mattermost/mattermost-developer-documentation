<!DOCTYPE html>





<html>
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title> Quick start guide (JS)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">  
<meta http-equiv="content-language" content="en-us" />

<meta name="og:site_name" value="Mattermost.com">
<meta name="og:title" value="Quick start guide (JS)">

 
  <meta name="description" content="This quick start guide will walk you through the basics of writing a Mattermost app in JavaScript.">
<meta name="twitter:description" content="This quick start guide will walk you through the basics of writing a Mattermost app in JavaScript.">
<meta name="og:description" content="This quick start guide will walk you through the basics of writing a Mattermost app in JavaScript.">



 
<link rel="canonical" href="https://developers.mattermost.com/integrate/apps/quick-start-js/">


<link rel="shortcut icon" type="image/png" href="https://developers.mattermost.com/img/favicon-32x32.png" />

<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600" rel="stylesheet">


<link rel="stylesheet" href="https://developers.mattermost.com/css/bootstrap.min.css">
<link rel="stylesheet" href="https://developers.mattermost.com/css/tabs.css">
<link rel="stylesheet" href="https://developers.mattermost.com/css/bar.css">
<link rel="stylesheet" href="https://developers.mattermost.com/css/styles.css">
<link rel="stylesheet" href="https://developers.mattermost.com/css/code.css">
<link rel="stylesheet" href="https://developers.mattermost.com/css/note.css">

<script async defer src="https://buttons.github.io/buttons.js"></script>


<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-53S4TVZ');</script>


    </head>
<body>
    
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-53S4TVZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


    
<header class="with-notification-bar">

    <a href="https://developers.mattermost.com/"><img src="https://developers.mattermost.com/img/logo.svg" alt="Mattermost Logo" width="212px"></a>
    <div class="header__menu-toggle">
        <i class="fa fa-bars"></i>
    </div>
    <ul class="header__links--right">
        <li><a href="https://developers.mattermost.com/">Home</a></li>
        
            
            
            
                
                    <li><a href="https://developers.mattermost.com/contribute/getting-started/">Contribute</a></li>
                
            
        
            
            
            
                
                    <li class="active"><a href="https://developers.mattermost.com/integrate/getting-started/">Integrate</a></li>
                
            
        
            
            
            
                
                    <li><a href="https://developers.mattermost.com/extend/getting-started/">Extend</a></li>
                
            
        
            
            
            
                
                    <li><a href="https://developers.mattermost.com/blog/">Blog</a></li>
                
            
        
            
            
            
                
                    <li><a href="https://docs.mattermost.com/">Admin Docs</a></li>
                
            
        
    </ul>
</header>


<div class='notification-bar sticky-top'>
    <div class="notification-bar__content">
        <a class="notification-bar__close">
            <span aria-hidden="true">×</span>
        </a>
        <a href="https://mattermost.com/careers">
            We&#39;re hiring!
        </a>
    </div>
</div>




    <div id="wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-3 sidebar">
    <div class="sidebar__menu-toggle">
        Quick start guide (JS)
        <i class="fa fa-bars pull-right"></i>
    </div>
    <div class="row sidebar__links">
        
            
        
            
        
            
        
            
        
            
            
                
                

                
                

                
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="https://developers.mattermost.com/integrate/getting-started/"> Getting Started</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/getting-started/how-should-i-integrate/"> How Should I Integrate?</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                </ul>
            
                
                

                
                

                
                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="https://developers.mattermost.com/integrate/incoming-webhooks/"> Incoming Webhooks</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="https://developers.mattermost.com/integrate/outgoing-webhooks/"> Outgoing Webhooks</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="https://developers.mattermost.com/integrate/slash-commands/"> Slash Commands</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="https://developers.mattermost.com/integrate/rest-api/"> API Reference</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                

                
                
                    
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                    
                        <a href="https://developers.mattermost.com/integrate/examples/"> Examples</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                </ul>
            
                
                

                
                
                    
                

                
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-minus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="https://developers.mattermost.com/integrate/apps/"> Apps (Developers Preview)</a>
                    
                </span>

                <ul class="sub-menu" style="display: block">
                    
                        
                        

                        
                        
                            
                        

                        
                        
                            
                        

                        <span class="item active">
                            <i class="sub-menu__toggle fa fa-minus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a class="active" href="#"> Quick start guide (JS)</a>
                            
                        </span>

                        <ul class="sub-menu" style="display: block">
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/apps/quick-start-go/"> Quick start guide (Go)</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/apps/manifest/"> Manifest</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/apps/call/"> Call</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/apps/bindings/"> Bindings</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="https://developers.mattermost.com/integrate/apps/interactivity/"> Interactivity</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/integrate/apps/interactivity/example-post-menu/"> Post Menu Example</a>
                                
                                </span>
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/apps/using-mattermost-api/"> Apps APIs</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/apps/using-third-party-api/"> Third-party APIs</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/apps/lifecycle/"> App Lifecycle</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                            
                                <a href="https://developers.mattermost.com/integrate/apps/deployment-aws/"> Deployment (AWS)</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/integrate/apps/deployment-aws/prepare-app/"> Preparing App (Developers)</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/integrate/apps/deployment-aws/deploy-to-aws/"> Deployment (Admins)</a>
                                
                                </span>
                            
                            
                                <span class="item ">
                                
                                    <a href="https://developers.mattermost.com/integrate/apps/deployment-aws/hello-lambda/"> Hello, lambda!</a>
                                
                                </span>
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/apps/deployment-http/"> Deployment (HTTP Server)</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                </ul>
            
                
                

                
                

                
                

                <span class="item ">
                    <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style=""></i>
                    
                        <a href="https://developers.mattermost.com/integrate/admin-guide/"> Mattermost Integrations and Developer Toolkit</a>
                    
                </span>

                <ul class="sub-menu" >
                    
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/admin-guide/admin-bot-accounts/"> Bot Accounts</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/admin-guide/admin-embedding/"> Embedding Mattermost</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/admin-guide/admin-webhooks-incoming/"> Incoming Webhooks</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/admin-guide/admin-interactive-dialogs/"> Interactive Dialogs</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/admin-guide/admin-interactive-messages/"> Interactive Messages: Buttons and Menus</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/admin-guide/admin-message-attachments/"> Message Attachments</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/admin-guide/admin-oauth2/"> OAuth 2.0 Applications</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/admin-guide/admin-webhooks-outgoing/"> Outgoing Webhooks</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/admin-guide/admin-personal-access-token/"> Personal Access Tokens</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/admin-guide/admin-plugins-beta/"> Plugins (Beta)</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/admin-guide/admin-slash-commands/"> Slash Commands</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/admin-guide/admin-golang-webhook/"> Using Mattermost with Webhook</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/admin-guide/admin-zapier-integration/"> Zapier Integration</a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                        
                        

                        
                        

                        
                        
                            
                        

                        <span class="item ">
                            <i class="sub-menu__toggle fa fa-plus-square-o" aria-hidden="true" style="display: none"></i>
                            
                                <a href="https://developers.mattermost.com/integrate/admin-guide/images/readme/"> </a>
                            
                        </span>

                        <ul class="sub-menu" >
                            
                        </ul>
                
                </ul>
            
            
        
    </div>
</div>

                <div class="col-lg-9 doc-content">
                    
<a href="https://github.com/mattermost/mattermost-developer-documentation/edit/master/site/content/integrate/apps/quick-start-js/_index.md" class="float-right edit-github">
    Edit on GitHub
</a>


                    <h1 class="mt-0 doc-title">
                        
                            Writing a Mattermost app in JavaScript
                        
                    </h1>
                    <p>This quick start guide explains the basics of writing a Mattermost app. In this guide you will build an app that:</p>
<ul>
<li>Contains a <code>manifest.json</code>, declares itself an HTTP application that acts as a bot, and attaches to locations in the user interface.</li>
<li>Attaches the form <code>send-modal</code> in its <code>bindings</code> to a button in the channel header, and the form <code>send</code> to a <code>/helloworld</code> command.</li>
<li>Contains a <code>send</code> function that sends a parameterized message back to the user.</li>
<li>Contains a <code>send-modal</code> function that forces displaying the <code>send</code> form as a modal.</li>
</ul>
<p>You can view an example <a href="https://github.com/mattermost/mattermost-plugin-apps/tree/master/examples/js/aws_hello">here</a>.</p>
<h2 id="prerequisites">Prerequisites&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#prerequisites"></i></a> </h2>
<p>Before you can start with your app, you first need to set up a local developer environment following the <a href="https://developers.mattermost.com/contribute/server/developer-setup/">server</a> and <a href="https://developers.mattermost.com/contribute/webapp/developer-setup/">webapp</a> setup guides. You must enable the apps feature flag before starting the Mattermost server by setting the environment variable <code>MM_FEATUREFLAGS_AppsEnabled</code> to <code>true</code> by e.g. adding <code>export MM_FEATUREFLAGS_AppsEnabled=true</code> to your <code>.bashrc</code> or using <code>make run-server MM_FEATUREFLAGS_AppsEnabled=true</code>.</p>
<p>In the System Console, ensure that the following are set to <strong>true</strong>:</p>
<ul>
<li><code>Enable Bot Account Creation</code></li>
<li><code>Enable OAuth 2.0 Service Provider</code></li>
</ul>
<p><strong>Note:</strong> Apps do not work with a production release of Mattermost right now. They can only be run in a development environment. A future release will support production environments.</p>
<h3 id="install-the-apps-plugin">Install the Apps plugin&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#install-the-apps-plugin"></i></a> </h3>
<p>The <a href="https://github.com/mattermost/mattermost-plugin-apps">apps plugin</a> is a communication bridge between your app and the Mattermost server. To install it on your local server, start by cloning the code in a directory of your choice run:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone https://github.com/mattermost/mattermost-plugin-apps.git
</code></pre></div><p>Then build the plugin using:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#366">cd</span> mattermost-plugin-apps
make dist
</code></pre></div><p>Then upload it to your local Mattermost server via the System Console.</p>
<h2 id="building-the-app">Building the app&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#building-the-app"></i></a> </h2>
<p>Start building your app by creating a directory for the code, setup a new package and install <a href="https://www.npmjs.com/package/node-fetch"><code>node-fetch</code></a> and <a href="https://expressjs.com/"><code>express</code></a>, which will be used later:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mkdir my-app
<span style="color:#366">cd</span> my-app
npm init
npm install node-fetch express
</code></pre></div><p>Then create a file called <code>app.js</code> containing a simple HTTP server:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#069;font-weight:bold">const</span> express <span style="color:#555">=</span> require(<span style="color:#c30">&#39;express&#39;</span>);
<span style="color:#069;font-weight:bold">const</span> fetch <span style="color:#555">=</span> require(<span style="color:#c30">&#39;node-fetch&#39;</span>); <span style="color:#09f;font-style:italic">// for later use
</span><span style="color:#09f;font-style:italic"></span>
<span style="color:#069;font-weight:bold">const</span> app <span style="color:#555">=</span> express();
app.use(express.json());
<span style="color:#069;font-weight:bold">const</span> host <span style="color:#555">=</span> <span style="color:#c30">&#39;localhost&#39;</span>;
<span style="color:#069;font-weight:bold">const</span> port <span style="color:#555">=</span> <span style="color:#f60">8080</span>;

app.listen(port, host, () =&gt; {
    console.log(<span style="color:#c30">`hello-world app listening at http://</span><span style="color:#a00">${</span>host<span style="color:#a00">}</span><span style="color:#c30">:</span><span style="color:#a00">${</span>port<span style="color:#a00">}</span><span style="color:#c30">`</span>);
});
</code></pre></div><h3 id="manifest">Manifest&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#manifest"></i></a> </h3>
<p>Your app has to provide a manifest, which declares app metadata. In this example, the following permissions are requested:</p>
<ul>
<li>Create posts as a bot.</li>
<li>Render icons in the channel header.</li>
<li>Create slash commands.</li>
</ul>
<p>The app needs to serve the manifest via HTTP. Therefore you need to attach a new HTTP handler to <code>/manifest.json</code>:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">app.get(<span style="color:#c30">&#39;/manifest.json&#39;</span>, (req, res) =&gt; {
    res.json({
        app_id<span style="color:#555">:</span> <span style="color:#c30">&#39;hello-world&#39;</span>,
        display_name<span style="color:#555">:</span> <span style="color:#c30">&#39;Hello, world!&#39;</span>,
        app_type<span style="color:#555">:</span> <span style="color:#c30">&#39;http&#39;</span>,
        icon<span style="color:#555">:</span> <span style="color:#c30">&#39;icon.png&#39;</span>,
        root_url<span style="color:#555">:</span> <span style="color:#c30">&#39;http://localhost:8080&#39;</span>,
        requested_permissions<span style="color:#555">:</span> [
            <span style="color:#c30">&#39;act_as_bot&#39;</span>,
        ],
        requested_locations<span style="color:#555">:</span> [
            <span style="color:#c30">&#39;/channel_header&#39;</span>,
            <span style="color:#c30">&#39;/command&#39;</span>,
        ],
    });
});
</code></pre></div><h3 id="bindings-and-locations">Bindings and locations&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#bindings-and-locations"></i></a> </h3>
<p>Locations are named elements in the Mattermost user interface. Bindings specify how an app&rsquo;s calls should be displayed and invoked from these locations.</p>
<p>The app creates a channel header button, and adds a <code>/helloworld send</code> command.</p>
<p>Add a handler for <code>/bindings</code>:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">app.post(<span style="color:#c30">&#39;/bindings&#39;</span>, (req, res) =&gt; {
    res.json({
        type<span style="color:#555">:</span> <span style="color:#c30">&#39;ok&#39;</span>,
        data<span style="color:#555">:</span> [
            {
                location<span style="color:#555">:</span> <span style="color:#c30">&#39;/channel_header&#39;</span>,
                bindings<span style="color:#555">:</span> [
                    {
                        location<span style="color:#555">:</span> <span style="color:#c30">&#39;send-button&#39;</span>,
                        icon<span style="color:#555">:</span> <span style="color:#c30">&#39;icon.png&#39;</span>,
                        label<span style="color:#555">:</span> <span style="color:#c30">&#39;send hello message&#39;</span>,
                        call<span style="color:#555">:</span> {
                            path<span style="color:#555">:</span> <span style="color:#c30">&#39;/send-modal&#39;</span>,
                        },
                    },
                ],
            },
            {
                location<span style="color:#555">:</span> <span style="color:#c30">&#39;/command&#39;</span>,
                bindings<span style="color:#555">:</span> [
                    {
                        icon<span style="color:#555">:</span> <span style="color:#c30">&#39;icon.png&#39;</span>,
                        label<span style="color:#555">:</span> <span style="color:#c30">&#39;helloworld&#39;</span>,
                        description<span style="color:#555">:</span> <span style="color:#c30">&#39;Hello World app&#39;</span>,
                        hint<span style="color:#555">:</span> <span style="color:#c30">&#39;[send]&#39;</span>,
                        bindings<span style="color:#555">:</span> [
                            {
                                location<span style="color:#555">:</span> <span style="color:#c30">&#39;send&#39;</span>,
                                label<span style="color:#555">:</span> <span style="color:#c30">&#39;send&#39;</span>,
                                call<span style="color:#555">:</span> {
                                    path<span style="color:#555">:</span> <span style="color:#c30">&#39;/send&#39;</span>,
                                },
                            },
                        ],
                    },
                ],
            },
        ],
    });
});
</code></pre></div><h3 id="functions-and-form">Functions and form&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#functions-and-form"></i></a> </h3>
<p>Functions handle user events and webhooks. The Hello World app exposes two functions:</p>
<ul>
<li><code>/send</code> that services the command and modal.</li>
<li><code>/send-modal</code> that forces the modal to be displayed.</li>
</ul>
<p>The functions use a simple form with one text field named <code>&quot;message&quot;</code>, the form submits to <code>/send</code>.</p>
<p><code>/send/form</code> and  <code>send-modal/submit</code> both return the same data:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">app.post([<span style="color:#c30">&#39;/send/form&#39;</span>, <span style="color:#c30">&#39;/send-modal/submit&#39;</span>], (req, res) =&gt; {
    res.json({
        type<span style="color:#555">:</span> <span style="color:#c30">&#39;form&#39;</span>,
        form<span style="color:#555">:</span> {
            title<span style="color:#555">:</span> <span style="color:#c30">&#39;Hello, world!&#39;</span>,
            icon<span style="color:#555">:</span> <span style="color:#c30">&#39;icon.png&#39;</span>,
            fields<span style="color:#555">:</span> [
                {
                    type<span style="color:#555">:</span> <span style="color:#c30">&#39;text&#39;</span>,
                    name<span style="color:#555">:</span> <span style="color:#c30">&#39;message&#39;</span>,
                    label<span style="color:#555">:</span> <span style="color:#c30">&#39;message&#39;</span>,
                },
            ],
            call<span style="color:#555">:</span> {
                path<span style="color:#555">:</span> <span style="color:#c30">&#39;/send&#39;</span>,
            },
        },
    });
});
</code></pre></div><h2 id="icons">Icons&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#icons"></i></a> </h2>
<p>Apps may include static assets. One example that was already used above is the <code>icon</code> for the two bindings. Static assets must be served under the <code>static</code> path.</p>
<p>Download an example icon using:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">curl https://github.com/mattermost/mattermost-plugin-apps/raw/master/examples/js/hello-world/icon.png -o icon.png
</code></pre></div><p>And then add another handler:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">app.get(<span style="color:#c30">&#39;/static/icon.png&#39;</span>, (req, res) =&gt; {
    res.sendFile(__dirname <span style="color:#555">+</span> <span style="color:#c30">&#39;/icon.png&#39;</span>);
});
</code></pre></div><h3 id="serving-the-data">Serving the data&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#serving-the-data"></i></a> </h3>
<p>Finally, add the application logic that gets executed when either the slash command is run or the modal submitted:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">app.post(<span style="color:#c30">&#39;/send/submit&#39;</span>, async (req, res) =&gt; {
    <span style="color:#069;font-weight:bold">const</span> call <span style="color:#555">=</span> req.body;

    <span style="color:#069;font-weight:bold">let</span> message <span style="color:#555">=</span> <span style="color:#c30">&#39;Hello, world!&#39;</span>;
    <span style="color:#069;font-weight:bold">const</span> submittedMessage <span style="color:#555">=</span> call.values.message;
    <span style="color:#069;font-weight:bold">if</span> (submittedMessage) {
        message <span style="color:#555">+=</span> <span style="color:#c30">&#39; ...and &#39;</span> <span style="color:#555">+</span> submittedMessage <span style="color:#555">+</span> <span style="color:#c30">&#39;!&#39;</span>;
    }

    <span style="color:#069;font-weight:bold">const</span> users <span style="color:#555">=</span> [
        call.context.bot_user_id,
        call.context.acting_user_id,
    ];

    <span style="color:#09f;font-style:italic">// Use the app bot to do API calls
</span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">const</span> options <span style="color:#555">=</span> {
        method<span style="color:#555">:</span> <span style="color:#c30">&#39;POST&#39;</span>,
        headers<span style="color:#555">:</span> {
            Authorization<span style="color:#555">:</span> <span style="color:#c30">&#39;BEARER &#39;</span> <span style="color:#555">+</span> call.context.bot_access_token,
            <span style="color:#c30">&#39;Content-Type&#39;</span><span style="color:#555">:</span> <span style="color:#c30">&#39;application/json&#39;</span>,
        },
        body<span style="color:#555">:</span> JSON.stringify(users),
    };

    <span style="color:#09f;font-style:italic">// Get the DM channel between the user and the bot
</span><span style="color:#09f;font-style:italic"></span>    <span style="color:#069;font-weight:bold">const</span> mattermostSiteURL <span style="color:#555">=</span> call.context.mattermost_site_url;

    <span style="color:#069;font-weight:bold">const</span> channel <span style="color:#555">=</span> await fetch(mattermostSiteURL <span style="color:#555">+</span> <span style="color:#c30">&#39;/api/v4/channels/direct&#39;</span>, options).
        then((res) =&gt; res.json())

    <span style="color:#069;font-weight:bold">const</span> post <span style="color:#555">=</span> {
        channel_id<span style="color:#555">:</span> channel.id,
        message,
    };

    <span style="color:#09f;font-style:italic">// Create a post
</span><span style="color:#09f;font-style:italic"></span>    options.body <span style="color:#555">=</span> JSON.stringify(post);

    fetch(mattermostSiteURL <span style="color:#555">+</span> <span style="color:#c30">&#39;/api/v4/posts&#39;</span>, options);


    res.json({
        type<span style="color:#555">:</span> <span style="color:#c30">&#39;ok&#39;</span>,
        markdown<span style="color:#555">:</span> <span style="color:#c30">&#39;Created a post in your DM channel.&#39;</span>
    });
});
</code></pre></div><p>The app is a simple HTTP server that serves the files you created above. The only application logic is in <code>send</code>, which takes the received <code>&quot;message&quot;</code> field and sends a message back to the user as the bot. Also, an ephemeral message is posted in the current channel.</p>
<h2 id="installing-the-app">Installing the app&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#installing-the-app"></i></a> </h2>
<p>Run your app using:</p>
<pre><code>node app.js
</code></pre><p>Then run the following slash commands on your Mattermost server:</p>
<pre><code>/apps install http http://localhost:8080/manifest.json
</code></pre><p>Confirm the installation in the modal that pops up. You can insert any secret into the <strong>App secret</strong> field for now.</p>
<h2 id="using-the-app">Using the app&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#using-the-app"></i></a> </h2>
<p>Select the &ldquo;Hello World&rdquo; channel header button in Mattermost, which brings up a modal:</p>
<p><img src="modal.png" alt="image"></p>
<p>Type <code>testing</code> and select <strong>Submit</strong>, you should see:</p>
<p><img src="submit.png" alt="image"></p>
<p>You can also use the <code>/helloworld send</code> command by typing <code>/helloworld send --message Hi!</code>. This posts the message to the Mattermost channel that you&rsquo;re currently in.</p>
<p><img src="command.png" alt="image"></p>
<h2 id="uninstalling-the-app">Uninstalling the app&nbsp;<a class="hanchor fa fa-link" ariaLabel="Anchor" href="#uninstalling-the-app"></i></a> </h2>
<p>Uninstall the app using:</p>
<pre><code>/apps uninstall hello-world
</code></pre>

                </div>
            </div>
        </div>
    </div>
    <footer class="text-center">
    <div class="container-fluid">
        <div class="footer__copyright">© Mattermost, Inc. All Rights Reserved.</div>
        <div class="footer__icons">
            <a href="https://www.facebook.com/Mattermost-2300985916642531/" target="_blank" rel="noopener noreferrer" class="btn-primary"><i class="fa fa-facebook"></i></a>
            <a href="https://twitter.com/mattermost" target="_blank" rel="noopener noreferrer" class="btn-primary"><i class="fa fa-twitter"></i></a>
            <a href="https://www.youtube.com/channel/UCNR05H72hi692y01bWaFXNA" target="_blank" rel="noopener noreferrer" class="btn-primary"><i class="fa fa-youtube"></i></a>
        </div>
    </div>
</footer>


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
<script src="https://developers.mattermost.com/js/tabs.js"></script>
<script src="https://developers.mattermost.com/js/main.js"></script>

</body>
</html>
